<html>
<head>
  <meta charset="utf-8">
  <title>基于用户的推荐</title>
  <link rel="stylesheet" type="text/css" href="../static/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="../static/css/bootstrap-responsive.css">
  <link rel="stylesheet" type="text/css" href="../static/css/examples.css">
  <link rel="stylesheet" type="text/css" href="../static/css/image-picker.css">
  <script src="../static/js/jquery.min.js" type="text/javascript"></script>
  <script src="../static/js/prettify.js" type="text/javascript"></script>
  <script src="../static/js/jquery.masonry.min.js" type="text/javascript"></script>
  <script src="../static/js/show_html.js" type="text/javascript"></script>
  <script src="../static/js/image-picker.min.js" type="text/javascript"></script>
  

 <style type="text/css">
img{width:166px!important;height: 260px!important}
.table th, .table td {text-align: center!important}
 </style>
</head>
<body>
<div id="container">
    {% if data %}
    <h3>基于您的兴趣爱好，我们为您推荐以下节目：</h3>
    <form action='/mails/' method="get">
    <div class="picker">
	    <select multiple="multiple" class="image-picker masonry" name="l">
	    {% for i in data %}
	    	<li><option data-img-src='../static/img/{{ i.id }}.png' value='{{ i.no }}'>{{ i }}</option></li>
	    {% endfor %}
	    </select>
	</div>
	{% else %}
	<h3>非常对不起，系统能力有限未能从您的相似记录中推荐韩剧</h3>
    {% endif %}
    <br>
    
      	<table width="80%" style="positive:relative;top:10px;margin-left:10%">
	    <tr>
	    	<td align="center">
	    		<h3>选择你感兴趣的发送到您的邮箱：</h3>
	    	</td>
	    </tr>
	    <tr>
	    	<td>
	    	<div style="width=40%;positive:relative;margin-left:30%;margin-right:30%">
	    		<input name="m" text-align="center" type="email" class="input-block-level" placeholder="PikamiaoDaZhanMiaowu@example.com">
	    	</div>
	    	</td>
	    </tr>
	    <tr>
	  		<td align="center">
	  			<button type="submit" class="btn-large btn-default">发送邮件</button>
	  		</td>
	  	</table>
	</form>
	<br>
	<h3>以下推荐所依赖仅供参考：</h3>
	<table class="table table-bordered">
	<thead>
		<tr>
		<th>推荐</th>
		<th colspan="3">推荐来自您刚选择的这些韩剧</th>
		</tr>
	</thead>
	<tbody>
		{% for i in data %}
		<tr>
			<td ><a href="http://movie.douban.com/subject/{{ i.id }}/">{{ i.title }}</a></td>
			{% for j in i.why %}
			<td ><a href="http://movie.douban.com/subject/{{ j.id }}/">{{ j.title }}</a></td>
			{% endfor %}
		</tr>
		{% endfor %}
	</tbody>
	</table>
</div>
</body>
<script>
  </script>
<script type="text/javascript">
    jQuery("select.image-picker").imagepicker({
      hide_select:  true,
    });

    jQuery("select.image-picker.show-labels").imagepicker({
      hide_select:  true, 
      show_label:   true,
    });
    var container = jQuery("select.image-picker.masonry").next("ul.thumbnails");
    container.imagesLoaded(function(){ 
      container.masonry({ 
        itemSelector:   "li",
      }); 
    });
  </script>
</html>